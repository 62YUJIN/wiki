# 웹해킹 스터디

## 스터디 개요
- webhacking.kr 의 문제를 풀어보면서 질문, 답변 주고 받는 형태로 진행
- 기간 : 2016년 10월 31일 ~ 2016년 12월 05일
- 구성원 : 김지연(소프16), 박지선(소프16), 한나라(정통16), 한영빈(소프16), 송지은(소프15)
- 모임 시각 : 월요일 오후 6시 ~ 8시
- 모임 장소 : 스스스 랩실

## 1주차 모임
- 2016.10.31
- 참석자 : 김지연, 박지선, 한나라, 한영빈, 송지은
- 푼 문제
 - 김지연 : 1, 4, 26
 - 박지선 : 1, 4
 - 한나라 : 1, 4, 15
 - 한영빈 : 1, 4, 17
 - 송지은 : 1, 3, 4, 5, 6, 12, 14, 15, 16, 17, 26, 38, 39, 54

### webhacking.kr 가입방법
- 먼저 webhacking.kr 에 접속.
- 페이지 우클릭 하여 나오는 컨텍스트 메뉴에서 `페이지 소스 보기` 선택
- 페이지 소스에서 아래와 같은 주석을 볼 수 있음. 회원 가입 버튼 코드를 주석으로 달아둔 것임. `===========================================` 로 감싸진 소스 부분을 복사함.
```html
<!--
Register
===========================================
<input type=button value='Register' onclick=location.href='join/includ2_join__frm__0001.php?mode=2d8d9c1703e9df8f1e8b7d0ba1578ce0' style=width:50pt;height:20pt;border:0;background:black;color:lightgreen></td></tr>
===========================================
-->
```
- 로그인 페이지로 돌아가서, 개발자 콘솔을 염(크롬에서는 `F12`)를 누르면 열림
- `body` 태그 내부 아무곳이나 마우스 커서 대고 우클릭, 컨텍스트 메뉴에서 `Edit as HTML` 선택
- 페이지에 코드를 삽입할 수 있음.(입력칸이 생김) 조금 전 복사한 소스를 붙여넣고, 입력칸 밖을 마우슬 누르던가 하여, 코드 삽입을 마침
- 그러면 페이지에 `Register` 버튼이 나타나는 것을 볼 수 있음. 눌러서 회원가입 진행.
- ID, PW, EMAIL 칸 체우고, decode me 항목에 임의의 값(?) 이 적혀 있는데, 이는 base64 로 3~4회정도 인코딩되어 나온 값임.
- decode me 의 값을, base64 인코딩/디코딩 사이트나 프로그램으로 디코딩.
 - 예를 들면 이 사이트 : http://www.convertstring.com/ko/EncodeDecode/Base64Decode
- 입력 받는 칸에, 원래의 인코딩된 값을 넣고, 디코딩 버튼을 눌러 디코딩 함. 출력 칸에 나온 값을 입력칸에 넣고 다시 디코딩.
 - 이러한 작업을 3번정도 반복하면, IP주소 같이 생긴 값이 나옴. 이제 이를 회원가입 창으로 돌아가서, decode me 칸의 값을 지우고 넣는다.
- `[Submit]` 을 눌러 계속한다.
- 가입 완료. 이제 로그인 하여 워게임 문제를 풀어보면 된다.

### 1번 문제
- 쿠키값을 조작하여 문제를 문제를 해결한다.
- 문제 1번 페이지에서 `index.phps` 를 클릭하면, 소스코드가 힌트로 나타난다.
- 소스코드에 나와있는 힌트를 보면, 쿠키의 `user_lv` 값이 6 이상이면, 값이 1로 변경되고, 5이상이면, 답이 나옴을 알 수 있다.
- 개발자 콘솔에서 스크립트를 실행하여 쿠키값을 조작할 수 있다.
- 다음을 개발자 콘솔의 콘솔 탭에서 입력하여, 쿠키값을 조회한다.
```javascript
document.cookie
```
- 아래와 같은 사항이 출력됨을 볼 수 있다.
```javascript
"user_lv=1; PHPSESSID=<임의의 세션 값>"
```
- 다음과 같은 방법으로 페이지의 쿠키값을 조작한다. 여기서는 `user_lv` 값을 5와 6 사이인 5.1 로 조작한다.
```javascript
document.cookie = "user_lv=5.1"
```
- 페이지를 새로고침 하면 문제가 풀리는 것을 볼 수 있다.

### 6번 문제
- http://webhacking.kr/challenge/web/web-06/index.phps 페이지로 들어간다.
- 쿠키를 확인해보면 user와 password라는 쿠키가 생성되어있다.
- admin을 base64로 20번 인코딩하여 user, password 쿠키에 값으로 저장해준다.
- 새로고침하면 문제가 풀린다.

### 12번 문제
- 개발자도구로 소스코드를 확인하면 아스키코드 값들이 나온다.
- 그 소스코드를 복사하여 콘솔창에 입력해주고 alert를 이용해 (아스키코드를 해석한)소스코드를 확인한다.

- 콘솔창 입력 예
```
WorkTimeFun=String.fromCharCode(118,97,114,32,101,...(생략)...,34,41,41,59,13,10,125,13,10);
alert(WorkTimeFun);
```

- 후에 소스코드를 분석해보면, ck 값이 패스워드라는 것을 알 수 있다.("="은 ""으로 바꿔줬으므로, "=" 제외)
- 위와 똑같은 방법으로 콘솔창에 String.from~~~ 부분을 입력하여 alert 해주면 패스워드를 확인할 수 있다.
- Auth에 패스워드를 입력해주면 문제가 해결된다.

### 15번 문제
- 문제에 들어가면 Access_Denied 창이 뜬다.
- 확인 버튼을 누른다
- 0.5초만에 답이 나왔다가 사라진다.
- Auth에 가서 답을 입력하면 문제 해결이 된다.

### 17번 문제
- 문제에 들어가면 입력칸 하나와 체크 버튼이 나온다.
- 개발자 콘솔을 열어서 요소 검사 탭(크롬에서는 Elements 탭)으로 들어간다.
- `body` 태그 끝자락에 `script` 태그 내부를 본다.
- `script` 태그 내부에 다음과 같은 내용의 자바스크립트 코드가 있다.

```javascript
unlock=100*10*10+100/10-10+10+50-9*8+7-6+5-4*3-2*1*10*100*10*10+100/10-10+10+50-9*8+7-6+5-4*3-2*1*10*100*10*10+100/10-10+10+50-9*8+7-6+5-4*3-2*1*10*100*10*10+100/10-10+10+50-9*8+7-6+5-4*3-2*1*10/100*10*10+100/10-10+10+50-9*8+7-6+5-4*3-2*1*10*100*10*10+100/10-10+10+50-9*8+7-6+5-4*3-2*1*10+100*10*10+100/10-10+10+50-9*8+7-6+5-4*3-2*1*10-100*10*10+100/10-10+10+50-9*8+7-6+5-4*3-2*1*10/100*10*10+100/10-10+10+50-9*8+7-6+5-4*3-2*1*10/100*10*10+100/10-10+10+50-9*8+7-6+5-4*3-2*1*10/100*10*10+100/10-10+10+50-9*8+7-6+5-4*3-2*1*10/100*10*10+100/10-10+10+50-9*8+7-6+5-4*3-2*1*10/100*10*10+100/10-10+10+50-9*8+7-6+5-4*3-2*1*10/100*10*10+100/10-10+10+50-9*8+7-6+5-4*3-2*1*10/100*10*10+100/10-10+10+50-9*8+7-6+5-4*3-2*1*10/100*10*10+100/10-10+10+50-9*8+7-6+5-4*3-2*1*10/100*10*10+100/10-10+10+50-9*8+7-6+5-4*3-2*1*10*100*10*10+100/10-10+10+50-9*8+7-6+5-4*3-2*1*10*100*10*10+100/10-10+10+50-9*8+7-6+5-4*3-2*1*10*100*10*10+100/10-10+10+50-9*8+7-6+5-4*3-2*1*10*100*10*10+100/10-10+10+50-9*8+7-6+5-4*3-2*1*10*100*10*10+100/10-10+10+50-9*8+7-6+5-4*3-2*1*10*100*10*10+100/10-10+10+50-9*8+7-6+5-4*3-2*1*10*100*10*10+100/10-10+10+50-9*8+7-6+5-4*3-2*1*10+9999999999;

function sub(){ if(login.pw.value==unlock){ alert("Password is "+unlock/10); }else { alert("Wrong");  }}
```

- `unlock` 변수에 저장된 값에 해당되는 값을 입력칸에 넣고 체크 바튼을 누르면, `Password is <비밀번호?>` 가 나오는 것을 알 수 있다.
- 콘솔 탭에서 바로 위의 코드에서 `unlock=...`　부분에서 `...` 에 해당하는 부분(`100*10...1*10+9999999999`) 콘솔에 붙여넣고 실행하면 아래와 같이 계산된 값이 나온다.

```javascript
9997809307
```

- 이를 입력칸에 넣고 체크 버튼을 누르면 다음과 같은 내용의 팝업이 나타난다.

```
Password is 999780930.7
```

- `webhacking.kr` 의 Auth 메뉴로 들어가서, `Flag` 칸에 `999780930.7` 를 넣고 제출한다.
- 문제가 풀리는 것을 확인할 수 있다.
