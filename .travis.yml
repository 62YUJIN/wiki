language: node_js
dist: trusty
addons:
  ssh_known_hosts:
   - github.com
   - 192.30.253.113
before_install:
 - openssl aes-256-cbc -K $encrypted_01897fd6d767_key -iv $encrypted_01897fd6d767_iv
   -in deploy_rsa.enc -out deploy_rsa -d
install:
 - npm install -g gitbook-cli
script:
 - git --version
 - echo "Importing SSH Key"
 - eval "$(ssh-agent -s)"
 - chmod 600 $TRAVIS_BUILD_DIR/deploy_rsa
 - ssh-add $TRAVIS_BUILD_DIR/deploy_rsa
 - echo "Configuring Git"
 - git config --global user.email "we.sss.you@gmail.com"
 - git config --global user.name "SSS Wiki Bot (via TravisCI)"
 - echo "Fetching Repo"
 - git clone git@github.com:skhu-sss/skhu-sss.github.hub.io.git
 - ls && mv skhu-sss.github.io _book
 - cd _book && ls
 - git checkout master
 - echo "Building Pages"
 - cd .. && ls
 - gitbook build
 - cd _book && ls
 - echo "Pushing Updates"
 - git remote set-url origin git@github.com:skhu-sss/skhu-sss.github.io.git
 - rm deploy_rsa.enc && rm deploy_rsa
 - git commit -a -m "Updated Contents - via Travis CI"
 - git push origin master
